"use strict";(self["webpackChunkfvl2025"]=self["webpackChunkfvl2025"]||[]).push([[970],{8970:function(t,r,e){e.r(r),e.d(r,{default:function(){return _}});var n=e(6768),o=e(4232);const a={key:0,class:"work-detail"},s={class:"work-hero"},l=["src"],i={class:"work-content"},c={class:"work-title"},u={class:"work-meta"},k={class:"work-description"},v={key:1,class:"work-detail loading"};function w(t,r,e,w,d,p){return w.work?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",s,[(0,n.Lk)("img",{src:w.coverUrl,alt:"cover"},null,8,l)]),(0,n.Lk)("div",i,[(0,n.Lk)("h1",c,(0,o.v_)(w.isEnglish?w.work?.work_en?.title:w.work?.work_zh?.title),1),(0,n.Lk)("div",u,[(0,n.Lk)("span",null,(0,o.v_)(w.isEnglish?"Artist":"藝術家")+"："+(0,o.v_)(w.isEnglish?w.work?.work_en?.artist:w.work?.work_zh?.artist),1)]),(0,n.Lk)("div",k,(0,o.v_)(w.descriptionText),1)])])):((0,n.uX)(),(0,n.CE)("div",v,"Loading..."))}var d=e(1387),p=e(144),g=e(4373),h={name:"PortfolioDetil",setup(){const t=(0,d.lq)(),r=t.params.id,e=(0,p.KR)(!1),o=(0,p.KR)(null),a=(0,p.KR)(""),s=(0,p.KR)(""),l=()=>{const r=t.query.lang;if("en"===r)return!0;if("zh"===r)return!1;try{const t=localStorage.getItem("lang");return"en"===t}catch{return!1}},i=(t,r)=>{for(const e of r){const r=t&&"string"===typeof t[e]?t[e]:"";if(r&&r.trim().length>0)return r}return""},c=t=>{if(!t||"string"!==typeof t)return"";const r=t.replace(/<br\s*\/?>(\r\n)?/gi,"\n"),e=document.createElement("div");e.innerHTML=r;const n=e.textContent||e.innerText||"";return n},u=()=>{a.value=o.value?`https://unzip-clab-api.clab.org.tw/${o.value.photo_1}`:"";const t=e.value?o.value?.work_en:o.value?.work_zh,r=i(t||{},["description","proposal","note","summary","content","text"]);s.value=c(r)},k=()=>{try{const t=`work_${r}`,e=localStorage.getItem(t);if(!e)return!1;const n=JSON.parse(e);return o.value=n,u(),!0}catch(t){return console.error("Failed to parse work data from localStorage:",t),!1}},v=async()=>{try{const{data:t}=await g.A.get(`https://unzip-clab-api.clab.org.tw/api/v1/works/${r}`),e=Array.isArray(t?.results)?t.results[0]:t||null;e&&(o.value=e,u())}catch(t){console.error("Failed to fetch work by id:",t)}},w=t=>{"lang"===t.key&&(e.value="en"===t.newValue,u())};return(0,n.sV)(async()=>{e.value=l();const t=k();t||await v(),window.addEventListener("storage",w)}),(0,n.xo)(()=>{window.removeEventListener("storage",w)}),{work:o,coverUrl:a,isEnglish:e,descriptionText:s}}},f=e(1241);const y=(0,f.A)(h,[["render",w],["__scopeId","data-v-ced46200"]]);var _=y}}]);
//# sourceMappingURL=970.12cff320.js.map